<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Starting Soon Countdown</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      overflow: hidden;
      font-family: Arial, Helvetica, sans-serif;
    }

    .container {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .timer {
      font-size: 96px;
      font-weight: 700;
      color: #55ffff;
      text-shadow:
        0 0 10px rgba(0,0,0,0.7),
        0 0 20px rgba(0,0,0,0.6);
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="timer" class="timer">Starts in 05:00</div>
  </div>

  <script>
    // Usage:
    // - Default: 5 minutes
    // - Override seconds: ?t=300
    // - Override label:  ?label=Starts%20in
    const params = new URLSearchParams(window.location.search);

    const DEFAULT_SECONDS = 300;
    const rawT = params.get("t");
    const durationSeconds = (() => {
      const n = rawT ? Number(rawT) : DEFAULT_SECONDS;
      return Number.isFinite(n) && n > 0 ? Math.floor(n) : DEFAULT_SECONDS;
    })();

    const label = params.get("label") || "Starts in";

    const el = document.getElementById("timer");

    // Drift-proof: compute remaining time from a fixed deadline
    const startMs = Date.now();
    const deadlineMs = startMs + durationSeconds * 1000;

    function formatRemaining(totalSeconds) {
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;
      return (
        String(minutes).padStart(2, "0") +
        ":" +
        String(seconds).padStart(2, "0")
      );
    }

    function render() {
      const remaining = Math.max(0, Math.ceil((deadlineMs - Date.now()) / 1000));
      el.textContent = `${label} ${formatRemaining(remaining)}`;

      if (remaining <= 0) {
        clearInterval(timerId);
      }
    }

    render();
    const timerId = setInterval(render, 250);
  </script>
</body>
</html>
